<div [ngSwitch]="currenState">

  <ng-container *ngSwitchCase="states.NOT_STARTED">

    <h1 class="centered">
      {{ "page.game.text" | translate }}
    </h1>
    <br>
    <br>
    <div text-center align-items-center>
      <button class="centered-img" ion-button large (click)="startGame()" style="margin: 0 auto;">START</button>
    </div>
  </ng-container>

  <ng-container *ngSwitchCase="states.STARTED">

    <page-switcher-loading-bar [progress]="100*(timeLeft/10000)">
    </page-switcher-loading-bar>

    <div id="grid">
      <ion-grid *ngIf="rects.length > 0">
        <ion-row *ngFor="let row of rects">
          <ion-col *ngFor="let rect of row">
            <div [ngClass]="rect.animations"
                 [class.target]="rect.isTarget"
                 [class.clicked]="rect.clicked"
                 class="grid-item"
                 (click)="clicked(rect, $event)">
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </ng-container>

  <ng-container *ngSwitchCase="states.ENDED">
    <h1 class="centered">
     {{ "page.game.ended" | translate }}
    </h1>
    <div text-center align-items-center>
      <button ion-button large (click)="reset()">
        {{ "page.game.retry" | translate }}
      </button>
    </div>
    <h1 class="centered">
      {{ "page.game.score" | translate }}: <b id="score">{{ score }}</b>
    </h1>
    <ng-container *ngIf="highscores.length > 5">
      <h2 class="centered">
        {{ "page.game.highscores" | translate }}
      </h2>
      <div text-center align-items-center>
        <ion-list>
          <ion-item *ngFor="let score of highscores.slice(0, 5); let i = index;" class="score">
            <div class="centered" style="font-size: 20pt;">
              <b>{{ i+1 }}.</b> {{ score }}
            </div>
          </ion-item>
        </ion-list>
      </div>
    </ng-container>
  </ng-container>

</div>

